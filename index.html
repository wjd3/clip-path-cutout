<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Clip Path Shape Test</title>
        <style>
            .clipped-element {
                width: 200px;
                height: 200px;
                background-color: lightblue;
                margin: 50px;
                transition: clip-path 0.3s ease-in-out;
            }

            .clip-path-value {
                margin-top: 50px;
            }
        </style>
    </head>
    <body>
        <div id="clipped-shape" class="clipped-element"></div>

        <label for="precision">Precision (number of points):</label>
        <input
            type="number"
            id="precision"
            placeholder="Precision"
            value="128"
        />

        <label for="diameter">Diameter (% of element):</label>
        <input type="number" id="diameter" placeholder="Diameter" value="50" />

        <label for="rotation">Rotation (in degrees):</label>
        <input type="number" id="rotation" placeholder="Rotation" value="0" />

        <label for="offsetX">Offset X (%):</label>
        <input type="number" id="offsetX" placeholder="Offset X" value="0" />

        <label for="offsetY">Offset Y (%):</label>
        <input type="number" id="offsetY" placeholder="Offset Y" value="0" />

        <label for="stretchX">Stretch X:</label>
        <input
            type="number"
            id="stretchX"
            placeholder="Stretch X"
            value="1"
            step="0.1"
        />

        <label for="stretchY">Stretch Y:</label>
        <input
            type="number"
            id="stretchY"
            placeholder="Stretch Y"
            value="1"
            step="0.1"
        />

        <button onclick="submitClipPath()">Submit</button>

        <div id="clipPathValue" class="clip-path-value"></div>

        <script>
            function submitClipPath() {
                const precision =
                    document.getElementById("precision").value || 128;
                const radius = document.getElementById("diameter").value
                    ? document.getElementById("diameter").value / 2
                    : 25;
                const rotation = document.getElementById("rotation").value || 0;
                const offsetX = document.getElementById("offsetX").value || 0;
                const offsetY = document.getElementById("offsetY").value || 0;
                const stretchX = document.getElementById("stretchX").value || 1;
                const stretchY = document.getElementById("stretchY").value || 1;

                const clipPath = generateClipPath(
                    parseInt(precision),
                    parseInt(radius),
                    parseInt(rotation),
                    parseFloat(offsetX),
                    parseFloat(offsetY),
                    parseFloat(stretchX),
                    parseFloat(stretchY),
                );
                document.getElementById("clipped-shape").style.clipPath =
                    clipPath;
                document.getElementById("clipPathValue").textContent =
                    `clip-path: ${clipPath};`;
            }

            function generateClipPath(
                precision = 128,
                radius = 25,
                rotation = 0,
                offsetX = 0,
                offsetY = 0,
                stretchX = 1,
                stretchY = 1,
            ) {
                const circlePoints = [...Array(precision)].map((_, i) => {
                    const a =
                        (-i / (precision - 1)) * Math.PI * 2 +
                        (rotation * Math.PI) / 180;
                    const x = Math.cos(a) * radius * stretchX + 50 + offsetX; // Apply offsetX and stretchX
                    const y = Math.sin(a) * radius * stretchY + 50 + offsetY; // Apply offsetY and stretchY
                    return `${x}% ${y}%`;
                });

                const clipPath = `polygon(100% 50%, 100% 100%, 0 100%, 0 0, 100% 0, 100% 50%, ${circlePoints.join(
                    ",",
                )})`;

                return clipPath;
            }
        </script>
    </body>
</html>
